<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>Reto MORADO ARMY â€” Quiz BTS</title>
  <style>
    :root{
      --bg1:#4b0082; /* indigo/purple */
      --bg2:#7b1fa2;
      --accent:#d1b3ff;
      --card:#2a004d;
      --glass: rgba(255,255,255,0.06);
      --text:#f6f1ff;
      --correct-border:#c77dff;
      --wrong-border:#ff5f98;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:var(--text);
      background: linear-gradient(135deg,var(--bg1) 0%, var(--bg2) 60%);
      min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px}
    .container{width:980px;max-width:980px;margin:auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:14px}
    .logo{background:var(--glass);padding:10px 14px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.2)}
    h1{margin:0;font-size:24px;letter-spacing:0.6px}
    p.lead{margin:4px 0 0;color:var(--accent);font-size:14px}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:14px;padding:16px;box-shadow:0 10px 30px rgba(10,0,30,0.35)}

    .welcome{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .welcome .text{max-width:70%}
    .welcome h2{margin:0;font-size:18px}
    .welcome p{margin:6px 0 0;color:var(--accent);font-size:14px}

    .quiz-area{display:grid;grid-template-columns:1fr 240px;gap:14px}
    .question{padding:12px;border-radius:10px;background:rgba(255,255,255,0.02)}
    .question h3{margin:0 0 8px;font-size:18px}
    .options{display:flex;flex-direction:column;gap:10px;margin-top:8px}
    button.option{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:12px;border-radius:10px;text-align:left;cursor:pointer;font-size:16px}
    button.option:hover{transform:translateY(-2px)}
    button.option.correct{border-color:var(--correct-border);background:linear-gradient(90deg, rgba(199,125,255,0.25), rgba(199,125,255,0.12));}
    button.option.wrong{border-color:var(--wrong-border);background:linear-gradient(90deg, rgba(255,95,152,0.25), rgba(255,95,152,0.12));}
    button.option:disabled{opacity:0.9;cursor:not-allowed}

    .sidebar{padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))}
    .timer{font-size:48px;font-weight:800;text-align:center}
    .meta{margin-top:12px;text-align:center}
    .meta p{margin:6px 0}
    .controls{display:flex;gap:8px;justify-content:center;margin-top:12px}
    .btn{background:var(--accent);color:#2b0140;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}

    .result{margin-top:14px;padding:10px;border-radius:10px;text-align:center}
    .hidden{display:none}

    footer{margin-top:12px;text-align:center;color:rgba(255,255,255,0.6);font-size:13px}

    /* mobile friendly adjustments */
    @media (max-width:600px){
      .container{max-width:100%;padding:8px}
      header{flex-direction:row;gap:10px}
      .quiz-area{grid-template-columns:1fr}
      .welcome{flex-direction:row}
      .welcome .text{max-width:60%}
      .sidebar{order:2}
      .question{order:1}
      button.option{font-size:18px;padding:14px;border-radius:12px}
      .timer{font-size:40px}
      .logo{padding:8px 10px}
      h1{font-size:20px}
    }

    /* make buttons large enough for touch */
    @media (pointer:coarse){
      button.option{padding:16px;font-size:18px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <strong style="font-size:16px">Reto MORADO ARMY</strong>
        <div style="font-size:12px;color:var(--accent)">Quiz BTS â€” 5 segundos por pregunta</div>
      </div>
      <div>
        <h1>Reto MORADO ARMY</h1>
        <p class="lead">Pon a prueba tus conocimientos de BTS. Â¡Responde rÃ¡pido!</p>
      </div>
    </header>

    <div class="card">
      <div class="welcome">
        <div class="text">
          <h2>Â¡Bienvenido! ðŸ’œ</h2>
          <p>PrepÃ¡rate para el <strong>Reto MORADO ARMY</strong>. Tienes 5 segundos para elegir la opciÃ³n correcta en cada pregunta. Â¡Suerte!</p>
        </div>
        <div>
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='110' height='110'><rect rx='18' width='100%' height='100%' fill='%23ffffff' opacity='0.02'/><text x='50%' y='55%' font-size='22' font-family='Arial' fill='%23f6f1ff' text-anchor='middle'>ðŸ’œ</text></svg>" alt="morado" style="width:88px;height:88px;border-radius:12px;" />
        </div>
      </div>

      <div class="quiz-area">
        <div>
          <div class="question">
            <h3 id="questionText">Pregunta</h3>
            <div class="options" id="options"></div>
          </div>

          <div class="result hidden" id="resultBox"></div>
        </div>

        <aside class="sidebar">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-size:12px;opacity:0.8">Tiempo</div>
              <div class="timer" id="timer">5</div>
            </div>
            <div style="text-align:right">
              <div style="font-size:12px;opacity:0.8">Puntos</div>
              <div style="font-size:22px;font-weight:700" id="score">0</div>
            </div>
          </div>

          <div class="meta">
            <p id="progress">Pregunta 0 / 0</p>
            <div class="controls">
              <button class="btn" id="startBtn">Comenzar</button>
              <button class="btn ghost" id="restartBtn">Reiniciar</button>
            </div>
          </div>
        </aside>
      </div>

      <footer>
        Juego creado para fans de BTS â€” responde antes de que se acabe el tiempo. ðŸ’œ
      </footer>
    </div>
  </div>

  <script>
    // Preguntas de ejemplo (in Spanish)
    const questions = [
      {
        q: 'Â¿CuÃ¡l es el nombre del fandom oficial de BTS?',
        options: ['BLINK', 'ARMY', 'BTS ARMY', 'MOA'],
        answer: 1
      },
      {
        q: 'Â¿CuÃ¡l es el nombre real del miembro conocido como RM?',
        options: ['Kim Namjoon', 'Min Yoongi', 'Jung Hoseok', 'Park Jimin'],
        answer: 0
      },
      {
        q: 'Â¿En quÃ© paÃ­s debutÃ³ BTS por primera vez?',
        options: ['Corea del Sur', 'JapÃ³n', 'Estados Unidos', 'China'],
        answer: 0
      },
      {
        q: 'Â¿CuÃ¡l canciÃ³n es conocida por la frase "I purple you" popularizada por un miembro?',
        options: ['Dynamite', 'Fake Love', 'Spring Day', 'Idol'],
        answer: 2
      },
      {
        q: 'Â¿QuiÃ©n es conocido por su apodo "Suga"?',
        options: ['J-Hope', 'Suga', 'V', 'Jungkook'],
        answer: 1
      },
      {
        q: 'Â¿QuÃ© miembro canta la parte principal en muchas baladas y es conocido por su voz suave?',
        options: ['Jungkook', 'Jimin', 'V', 'All of them'],
        answer: 2
      }
    ];

    // state
    let current = 0;
    let score = 0;
    let timer = 5;
    let intervalId = null;
    let accepting = false;

    const questionText = document.getElementById('questionText');
    const optionsBox = document.getElementById('options');
    const timerEl = document.getElementById('timer');
    const scoreEl = document.getElementById('score');
    const progressEl = document.getElementById('progress');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const resultBox = document.getElementById('resultBox');

    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

    function startQuiz(){
      current = 0; score = 0; scoreEl.textContent = score; resultBox.classList.add('hidden');
      // copy and shuffle questions to avoid modifying original
      window._q = shuffle(questions.slice());
      startBtn.textContent = 'Siguiente';
      renderQuestion();
    }

    function renderQuestion(){
      if(!window._q || current >= window._q.length){
        showFinal();
        return;
      }
      const item = window._q[current];
      questionText.textContent = item.q;
      optionsBox.innerHTML = '';
      // create option buttons
      item.options.forEach((opt, idx)=>{
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.textContent = opt;
        btn.disabled = false;
        btn.addEventListener('click', ()=> selectOption(idx, btn));
        optionsBox.appendChild(btn);
      });
      progressEl.textContent = `Pregunta ${current+1} / ${window._q.length}`;
      // reset timer
      timer = 5; timerEl.textContent = timer; accepting = true;
      if(intervalId) clearInterval(intervalId);
      intervalId = setInterval(()=>{
        timer--;
        timerEl.textContent = timer;
        if(timer <= 0){
          clearInterval(intervalId);
          timeUp();
        }
      },1000);
    }

    function selectOption(selectedIdx, btnEl){
      if(!accepting) return;
      accepting = false;
      clearInterval(intervalId);
      const correctIdx = window._q[current].answer;
      const optionButtons = Array.from(document.querySelectorAll('.option'));
      optionButtons.forEach((b,i)=>b.disabled = true);

      if(selectedIdx === correctIdx){
        btnEl.classList.add('correct');
        score += 1;
        scoreEl.textContent = score;
        showResult(true);
      } else {
        btnEl.classList.add('wrong');
        if(optionButtons[correctIdx]) optionButtons[correctIdx].classList.add('correct');
        showResult(false);
      }
      current += 1;
    }

    function timeUp(){
      accepting = false;
      const optionButtons = Array.from(document.querySelectorAll('.option'));
      optionButtons.forEach((b,i)=>b.disabled = true);
      // mark correct
      const correctIdx = window._q[current].answer;
      if(optionButtons[correctIdx]) optionButtons[correctIdx].classList.add('correct');
      showResult(null); // null means time out
      current += 1;
    }

    function showResult(ok){
      resultBox.classList.remove('hidden');
      if(ok === true){
        resultBox.textContent = 'Â¡Correcto! +1 punto';
        resultBox.style.background = 'linear-gradient(90deg, rgba(124,255,178,0.06), rgba(255,255,255,0.01))';
      } else if(ok === false){
        resultBox.textContent = 'Respuesta incorrecta.';
        resultBox.style.background = 'linear-gradient(90deg, rgba(255,139,139,0.04), rgba(255,255,255,0.01))';
      } else {
        resultBox.textContent = 'Se acabÃ³ el tiempo.';
        resultBox.style.background = 'linear-gradient(90deg, rgba(255,215,130,0.04), rgba(255,255,255,0.01))';
      }
      // automatically move on after a short pause
      setTimeout(()=>{
        resultBox.classList.add('hidden');
        renderQuestion();
      },900);
    }

    function showFinal(){
      // Consider player "lost" if score is less than total questions (user requested a "Perdiste xd" message)
      const lost = score < window._q.length;
      questionText.textContent = lost ? 'Perdiste xd ðŸ’œ' : 'Â¡Terminaste el Reto!';
      optionsBox.innerHTML = `<div style="padding:12px">Tu puntaje final es <strong>${score} / ${window._q.length}</strong></div>`;
      progressEl.textContent = `Pregunta ${window._q.length} / ${window._q.length}`;
      timerEl.textContent = '-';
      startBtn.textContent = 'Volver a jugar';
    }

    startBtn.addEventListener('click', ()=>{
      // if not started or finished, start or restart
      if(startBtn.textContent === 'Comenzar' || startBtn.textContent === 'Volver a jugar'){
        startQuiz();
      } else {
        // if it's 'Siguiente' and quiz running, skip to next question
        accepting = false; clearInterval(intervalId); current += 1; renderQuestion();
      }
    });

    restartBtn.addEventListener('click', ()=>{
      if(intervalId) clearInterval(intervalId);
      current = 0; score = 0; scoreEl.textContent = score; timerEl.textContent = 5; questionText.textContent = 'Presiona Comenzar para iniciar el Reto'; optionsBox.innerHTML = '';
      startBtn.textContent = 'Comenzar'; resultBox.classList.add('hidden'); progressEl.textContent = `Pregunta 0 / ${questions.length}`;
    });

    // set initial state
    restartBtn.click();

  </script>
</body>
</html>
